---
title: Configuration
description: Learn how to configure your Nubase project with the nubase/ folder and nubase.config.ts.
---

import { FileTree } from '@astrojs/starlight/components';

Every Nubase project uses a `nubase/` folder at the project root to store database configuration, migration files, and schema snapshots.

## Folder Structure

<FileTree>

- nubase/
  - nubase.config.ts Main configuration file
  - migrations/ SQL migration files
    - 20260101120000_initial.sql
    - 20260102150000_add_users.sql
  - snapshots/ Schema snapshots per environment (git-ignored)
    - local.json
  - .gitignore Ignores snapshots/

</FileTree>

- **`nubase.config.ts`** -- The main configuration file where you define your database environments.
- **`migrations/`** -- Contains SQL migration files generated by `nubase db diff` or created manually with `nubase migration new`. These are tracked in git.
- **`snapshots/`** -- Contains JSON snapshots of each environment's database schema. These are git-ignored and regenerated automatically.

## Configuration File

The `nubase.config.ts` file defines your database environments using the `defineConfig` helper:

```typescript
import { defineConfig } from "@nubase/cli";

export default defineConfig({
  environments: {
    local: {
      url: "postgres://myapp:myapp@localhost:5432/myapp",
    },
    production: {
      url: process.env.PRODUCTION_DATABASE_URL!,
    },
  },
  defaultEnvironment: "local",
});
```

### `defineConfig(config)`

A type-safe helper that accepts a `NubaseConfig` object and returns it unchanged. It exists purely to give you TypeScript autocompletion and validation in your config file.

### `NubaseConfig`

| Property | Type | Description |
|----------|------|-------------|
| `environments` | `Record<string, { url: string }>` | Map of environment names to database connection URLs. At least one environment is required. |
| `defaultEnvironment` | `string` (optional) | The environment used when `--env` is not specified. Defaults to `"local"`. |

Each environment only needs a `url` property -- a standard PostgreSQL connection string.

## Environment Variables

The CLI automatically loads a `.env` file from your **project root** (the parent directory of `nubase/`). This means you can reference environment variables in your config:

```
my-app/
├── .env                    # <-- loaded automatically
├── nubase/
│   └── nubase.config.ts    # <-- can use process.env.*
├── frontend/
├── backend/
└── schema/
```

Example `.env` file:

```bash
PRODUCTION_DATABASE_URL=postgres://user:password@host:5432/mydb
```

This keeps sensitive credentials out of your config file and out of version control.

## Multi-Environment Setup

You can define as many environments as you need:

```typescript
import { defineConfig } from "@nubase/cli";

export default defineConfig({
  environments: {
    local: {
      url: "postgres://myapp:myapp@localhost:5432/myapp",
    },
    staging: {
      url: process.env.STAGING_DATABASE_URL!,
    },
    production: {
      url: process.env.PRODUCTION_DATABASE_URL!,
    },
  },
  defaultEnvironment: "local",
});
```

Use the `--env` flag on any CLI command to target a specific environment:

```bash
npx nubase db pull --env production
npx nubase db diff --env staging
```

Run `npx nubase envs` to see all configured environments and which one is the default.

## Next Steps

- See the [CLI Reference](/docs/cli) for all available commands
- Learn about [Getting Started](/docs/getting-started) for initial project setup
